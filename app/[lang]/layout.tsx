import "primereact/resources/primereact.min.css"
import "primeicons/primeicons.css"
import 'primeflex/primeflex.css'
import '../../utils/styles/reset.css'
import '../../utils/styles/globals.css'
import '../../utils/themes/theme.css'

import Providers from '../../components/ui/withChildren/Providers'
import General from '@/components/servers-components/layouts/layout/General'
import { Locale, i18n } from '@/i18n.config'
import { Metadata } from 'next'
import { Roboto } from 'next/font/google'

const themes = () => import('@/utils/themes/themes.json').then(module => module.default)

const roboto = Roboto({
    subsets: ['latin'],
    weight: ["100", "300", "400", "500", "700", "900"],
    style: 'normal',
})

export async function generateStaticParams() {
    return i18n.locales.map(locale => ({ lang: locale }))
}

export const metadata: Metadata = {
    title: {
        template: '%s | NEXT MGO',
        default: 'NEXT MGO',
    },
    description: 'Generated by create next app',
}

export default async function RootLayout({ children, params }: { children: React.ReactNode, params: { lang: Locale } }) {
    const { theme } = await themes()

    return (
        <html lang={params.lang} suppressHydrationWarning={true}>
            <head>
                {/* <link id="app-theme" href={"theme.css"} rel="stylesheet" /> */}
                {/* <link id="app-theme" href={"/themes/md-" + theme + "-deeppurple/theme.css"} rel="stylesheet" /> */}
            </head>

            <body className={roboto.className + ' flex flex-column justify-content-between'} style={{ minHeight: '100vh' }}>
                <Providers>
                    {children}

                    {/* <General lang={params.lang}>
                        {children}
                    </General> */}
                </Providers>
            </body>
        </html>
    )
}